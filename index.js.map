{"version":3,"file":"index.js","sources":["../src/core/contexts/index.js","../src/core/utils/session-storage.js","../src/core/utils/helpers.js","../src/modules.js","../src/core/modules/actions.js","../src/core/modules/reducers.js","../src/core/store/rootReducers.js","../src/core/api/auth-headers.js","../src/core/api/api-error.js","../src/core/modules/sagas.js","../src/core/store/rootSaga.js","../src/core/store/history.js","../src/core/store/store.js","../src/core/modules/selectors.js","../src/core/modules/Provider.js","../src/core/modules/useActions.js","../src/core/modules/useSelectors.js","../src/core/utils/fp/isNumber.js","../src/core/utils/fp/isString.js","../src/core/utils/fp/isWithin.js","../src/core/api/interceptors/evolve-response.js","../src/core/api/interceptors/persist-headers.js","../src/core/api/interceptors/parse-response.js","../src/core/api/interceptors/parse-error.js","../src/core/api/index.js"],"sourcesContent":["import { createContext } from 'react'\n\nexport const ReducersProvider = createContext()\n","export function persistData(key, value) {\n  if (value === 'batch-request') {\n    return;\n  }\n\n  if (!localStorage) {\n    console.warn('\"window.localStorage\" not found. Data will not be persisted.');\n    return;\n  }\n\n  localStorage.setItem(key, value);\n}\n\nexport function retrieveData(key) {\n  return localStorage && localStorage.getItem(key);\n}\n\nexport function removeData(key) {\n  return localStorage && localStorage.removeItem(key);\n}\n","import { persistData } from './session-storage';\n\nexport const toSnackCase = (value) => {\n  return value.replace(/[A-Z]/g, (val) => `_${val.toLowerCase()}`).replace(/^_/, '');\n};\n\nexport const setApiBaseUrl = (url) => {\n  persistData('SG_MODULE_BASE_URL_API', url);\n};\n\nexport const sgModule = (moduleName, module) => {\n  const newModule = module;\n  const newActions = module.actions;\n  Object.keys(newActions).forEach((key) => {\n    newActions[key].module = moduleName;\n    newActions[key].name = key;\n  });\n  newModule.actions = newActions;\n  return newModule;\n};\n","import { sgModule } from './core/utils/helpers';\n\nlet modules;\n\nlet storeMiddlewares = [];\nlet connectRouter;\nlet authHeaders;\n\ntry {\n  try {\n    if (__dirname) {\n      modules = require(`${__dirname}/../../../../src/modules/index.js`);\n    } else {\n      modules = require(`../../../../src/modules/index.js`);\n    }\n  } catch {\n    modules = require(`../../../../src/modules/index.js`);\n  }\n\n  storeMiddlewares = modules.storeMiddlewares || (() => []);\n  connectRouter = modules.connectRouter || null;\n  authHeaders = modules.authHeaders || null;\n} catch (ex) {\n  console.error(\n    'Error: Modules not found, please create a file with your modules in {PROJECT_ROOT}/src/modules/index.js ',\n    ex,\n  );\n  modules = {};\n}\n\nexport { storeMiddlewares, connectRouter, authHeaders };\n\nconst appModules = modules.default || {};\n\nObject.keys(appModules).forEach((key) => {\n  appModules[key] = sgModule(key, appModules[key]);\n});\n\nexport default modules.default;\n","import { createActions } from 'reduxsauce';\nimport Modules from '../../modules';\n\nconst actionsModules = {};\nconst actions = {};\n\nObject.keys(Modules).forEach((module) => {\n  const actionsModule = Modules[module].actions;\n  Object.keys(actionsModule).forEach((action) => {\n    actionsModules[`${action}Start`] = actionsModule[action].action.start || ['params'];\n    actionsModules[`${action}Error`] = actionsModule[action].action.error;\n    actionsModules[`${action}Success`] = actionsModule[action].action.success;\n  });\n  actions[module] = createActions(actionsModules, {\n    prefix: `${module.toUpperCase()}/`,\n  });\n});\n\nexport default actions;\n","import { createReducer } from 'reduxsauce';\nimport Immutable from 'seamless-immutable';\nimport Modules from '../../modules';\nimport actions from './actions';\nimport { toSnackCase } from '../utils/helpers';\n\nconst reducers = {};\n\nObject.keys(Modules).forEach((module) => {\n  const mapActionReducer = {};\n  const moduleActions = Modules[module].actions;\n  const moduleState = Modules[module].state;\n  const { Types } = actions[module];\n\n  Object.keys(moduleActions).forEach((action) => {\n    const reducerActionStateStart = (state) => {\n      const newKeys = {};\n      if (moduleActions[action].state?.start) {\n        Object.keys(moduleActions[action].state.start).forEach((param) => {\n          newKeys[param] = moduleActions[action].state.start[param];\n        });\n      }\n      return state.merge({ ...newKeys });\n    };\n\n    const reducerActionStateSuccess = (state, params) => {\n      const newKeys = {};\n      if (moduleActions[action].state?.success) {\n        Object.keys(moduleActions[action].state.success).forEach((param) => {\n          newKeys[param] = moduleActions[action].state.success[param];\n        });\n      }\n\n      if (moduleActions[action].action?.success) {\n        moduleActions[action].action.success.forEach((param) => {\n          newKeys[param] = params[param];\n        });\n      }\n      return state.merge({ loading: false, ...newKeys });\n    };\n\n    const reducerActionStateError = (state, params) => {\n      const newKeys = {};\n      if (moduleActions[action].state?.error) {\n        Object.keys(moduleActions[action].state.error).forEach((param) => {\n          newKeys[param] = moduleActions[action].state.error[param];\n        });\n      }\n      if (moduleActions[action].action?.error) {\n        moduleActions[action].action.error.forEach((param) => {\n          newKeys[param] = params[param];\n        });\n      }\n      return state.merge({ loading: false, ...newKeys });\n    };\n\n    const actionName = toSnackCase(action);\n\n    mapActionReducer[Types[`${actionName.toUpperCase()}_START`]] = reducerActionStateStart;\n    mapActionReducer[Types[`${actionName.toUpperCase()}_SUCCESS`]] = reducerActionStateSuccess;\n    mapActionReducer[Types[`${actionName.toUpperCase()}_ERROR`]] = reducerActionStateError;\n  });\n\n  const INITIAL_STATE = Immutable({ ...moduleState });\n  reducers[module] = createReducer(INITIAL_STATE, {\n    ...mapActionReducer,\n  });\n});\n\nexport default reducers;\n","import { combineReducers } from 'redux';\nimport { connectRouter } from '../../modules';\nimport appReducers from '../modules/reducers';\n\nconst reducers = (history) => {\n  if (!connectRouter) {\n    return { ...appReducers };\n  }\n\n  return { router: connectRouter(history), ...appReducers };\n};\n\nconst rootReducers = (history) => combineReducers(reducers(history));\n\nexport default rootReducers;\n","import { authHeaders } from '../../modules';\n\nexport const getAuthHeaders = () => {\n  return authHeaders || ['uid', 'access-token', 'expiry', 'client'];\n};\n\nexport function retrieveAuthHeaders(retrieveData) {\n  return () => {\n    if (!retrieveData) {\n      return null;\n    }\n\n    const headers = {};\n    const headersKeys = getAuthHeaders();\n    headersKeys.forEach((key) => {\n      headers[key] = retrieveData(key);\n    });\n\n    return headers;\n  };\n}\n\nexport function persistAuthHeaders(persistData) {\n  return (headers) => {\n    if (!persistData || !headers) {\n      return;\n    }\n\n    const headersKeys = getAuthHeaders();\n    headersKeys.forEach((key) => {\n      persistData(key, headers[key]);\n    });\n  };\n}\n\nexport function clearAuthHeaders(removeData) {\n  return () => {\n    if (!removeData) {\n      return;\n    }\n\n    const headersKeys = getAuthHeaders();\n    headersKeys.forEach((key) => {\n      removeData(key);\n    });\n  };\n}\n","import { removeData } from '../utils/session-storage';\nimport { clearAuthHeaders } from './auth-headers';\n\nexport const buildError = (response) => {\n  const statusCode = response ? response.status : null;\n  const errors = response && response.data ? { ...response.data.errors } : {};\n\n  if (statusCode === 401) {\n    clearAuthHeaders(removeData);\n  }\n  return {\n    body: { errors },\n    statusCode,\n  };\n};\n\nconst getErrors = (error) =>\n  error && error.body && error.body.errors ? error.body.errors : { error: ['There was an error'] };\n\nexport const getErrorMessage = (error) => {\n  return Object.values(getErrors(error)).join('. ') || 'There was an error';\n};\n","import { call, put, takeLatest, take } from 'redux-saga/effects';\nimport { toSnackCase } from '../utils/helpers';\nimport { getErrorMessage } from '../api/api-error';\nimport actions from './actions';\nimport Modules from '../../modules';\n\nconst sagas = [];\n\nObject.keys(Modules).forEach((module) => {\n  const moduleActions = Modules[module].actions;\n  const { Types, Creators } = actions[module];\n\n  Object.keys(moduleActions).forEach((action) => {\n    const isTake = !!moduleActions[action]?.isTake;\n\n    function* sagasFunction({ params = {} }) {\n      const { data, options } = params;\n      if (moduleActions[action].sagas) {\n        yield moduleActions[action].sagas(Creators, { params: data, options });\n        return;\n      }\n      try {\n        let resp = { data: null };\n        if (moduleActions[action].api) {\n          resp = yield call(moduleActions[action].api, data);\n        } else {\n          resp = params;\n        }\n        yield put(Creators[`${action}Success`](resp.data));\n\n        if (options && options.onSuccess) {\n          options.onSuccess(resp.data);\n        }\n      } catch (error) {\n        if (options && options.onError) {\n          options.onError(getErrorMessage(error));\n        }\n        yield put(Creators[`${action}Error`](getErrorMessage(error)));\n      }\n    }\n\n    const actionName = toSnackCase(action);\n    if (!isTake) {\n      sagas.push(takeLatest(Types[`${actionName.toUpperCase()}_START`], sagasFunction));\n    } else {\n      sagas.push(take(Types[`${actionName.toUpperCase()}_START`], sagasFunction));\n    }\n  });\n});\n\nexport default sagas;\n","import { all } from 'redux-saga/effects';\nimport sagas from '../modules/sagas';\n\nexport default function* rootSaga() {\n  yield all([...sagas]);\n}\n","import { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory();\n\nexport default history;\n","/* eslint no-underscore-dangle: \"off\" */\n\nimport createSagaMiddleware, { END } from 'redux-saga';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport rootReducers from './rootReducers';\nimport rootSaga from './rootSaga';\nimport history from './history';\nimport { storeMiddlewares } from '../../modules';\n\nconst reducers = rootReducers(history);\n\nconst middlewares = [];\nconst sagaMiddleware = createSagaMiddleware();\nconst composeEnhancers = process.env.REACT_APP_LOGGING_ENABLED\n  ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n  : compose;\n\nconst storeAppMiddlewares = storeMiddlewares(history);\nif (storeAppMiddlewares.length > 0) {\n  storeAppMiddlewares.forEach((el) => {\n    middlewares.push(el);\n  });\n}\nmiddlewares.push(sagaMiddleware);\n\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(...middlewares)));\n\nstore.runSaga = sagaMiddleware.run;\nstore.runSaga(rootSaga);\nstore.close = () => store.dispatch(END);\n\nexport default store;\n","import { createSelector } from 'reselect';\nimport Modules from '../../modules';\n\nconst selectors = {};\n\nObject.keys(Modules).forEach((module) => {\n  const getState = (state) => {\n    return state[module];\n  };\n\n  selectors[module] = { state: createSelector(getState, (state) => state) };\n});\n\nexport default selectors;\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { ReducersProvider } from '../contexts';\nimport store from '../store/store';\nimport actions from './actions';\nimport selectors from './selectors';\n\nexport default ({ children }) => {\n  return (\n    <Provider store={store}>\n      <ReducersProvider.Provider value={{ actions, selectors }}>\n        {children}\n      </ReducersProvider.Provider>\n    </Provider>\n  );\n};\n","import { useCallback, useContext } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { ReducersProvider } from '../contexts';\n\nexport default () => {\n  const dispatchRedux = useDispatch();\n  const { actions } = useContext(ReducersProvider);\n\n  const request = useCallback(\n    ({ action, data, options }) => {\n      const { module, name } = action;\n      dispatchRedux(actions[module].Creators[`${name}Start`]({ data, options: options || {} }));\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [dispatchRedux],\n  );\n\n  return {\n    request,\n    dispatch: request,\n  };\n};\n","import { useContext } from 'react';\nimport { useSelector } from 'react-redux';\nimport { ReducersProvider } from '../contexts';\n\nexport default (module) => {\n  const { selectors } = useContext(ReducersProvider);\n  const valueProp = useSelector((state) => selectors[module].state(state));\n  return valueProp;\n};\n","import { is } from 'ramda';\n\nconst isNumber = is(Number);\n\nexport default isNumber;\n","import { is } from 'ramda';\n\nconst isString = is(String);\nexport default isString;\n","import { curry, lte, gte } from 'ramda';\n\nimport isNumber from './isNumber';\n\nconst isWithin = curry(\n  (min, max, value) =>\n    isNumber(min) && isNumber(max) && isNumber(value) && gte(value, min) && lte(value, max),\n);\n\nexport default isWithin;\n","import { isWithin } from '../../utils/fp';\n\nconst in200s = isWithin(200, 299);\n\nconst evolveResponse = (response) => ({\n  ...response,\n  ok: in200s(response.status),\n});\n\nexport default evolveResponse;\n","import { persistAuthHeaders } from '../auth-headers';\nimport { persistData } from '../../utils/session-storage';\n\nconst persistHeaders = (response) => {\n  if (response.ok) {\n    if (response.headers['access-token']) {\n      persistAuthHeaders(persistData)(response.headers);\n    }\n  }\n\n  return response;\n};\n\nexport default persistHeaders;\n","import humps from 'humps';\nimport { path } from 'ramda';\n\nconst getData = (data) => (data && data.data ? data.data : data);\n\nconst parseResponse = (response) => {\n  const isS3Presign = response.config.url.match('/s3/sign');\n  if (response.ok && !response.data.errors && !isS3Presign) {\n    return {\n      ...response,\n      data: humps.camelizeKeys(getData(response.data)),\n      pagination: humps.camelizeKeys(getData(response.data.pagination)),\n      meta: path(['data', 'meta'], response),\n    };\n  }\n\n  return response;\n};\n\nexport default parseResponse;\n","import { buildError } from '../api-error';\n\nconst parseError = (error) => Promise.reject(buildError(error.response));\n\nexport default parseError;\n","import axios from 'axios';\nimport humps from 'humps';\n\nimport { retrieveData } from '../utils/session-storage';\nimport { retrieveAuthHeaders } from './auth-headers';\nimport evolveResponse from './interceptors/evolve-response';\nimport persistHeaders from './interceptors/persist-headers';\nimport parseResponse from './interceptors/parse-response';\nimport parseError from './interceptors/parse-error';\n\nconst api = axios.create({\n  baseURL: retrieveData('SG_MODULE_BASE_URL_API'),\n});\n\napi.interceptors.request.use((request) => {\n  // Retrieve persisted headers and set in the new API instance\n  const authHeaders = retrieveAuthHeaders(retrieveData)();\n  let { data } = request;\n\n  if (!(data instanceof FormData)) {\n    data = humps.decamelizeKeys(request.data);\n  }\n\n  const headersAuthRequest = {};\n  Object.keys(authHeaders).forEach((key) => {\n    if (authHeaders[key]) {\n      headersAuthRequest[key] = authHeaders[key];\n    }\n  });\n  return {\n    ...request,\n    params: request.params ? humps.decamelizeKeys(request.params) : {},\n    data,\n    headers: {\n      ...request.headers,\n      ...headersAuthRequest,\n    },\n  };\n});\n\napi.interceptors.response.use(evolveResponse);\napi.interceptors.response.use(persistHeaders);\napi.interceptors.response.use(parseResponse, parseError);\n\nexport default api;\n"],"names":["ReducersProvider","createContext","persistData","key","value","localStorage","console","warn","setItem","retrieveData","getItem","removeData","removeItem","toSnackCase","replace","val","toLowerCase","setApiBaseUrl","url","sgModule","moduleName","module","newModule","newActions","actions","Object","keys","forEach","name","modules","storeMiddlewares","connectRouter","authHeaders","__dirname","require","ex","error","appModules","actionsModules","Modules","actionsModule","action","start","success","createActions","prefix","toUpperCase","reducers","mapActionReducer","moduleActions","moduleState","state","Types","reducerActionStateStart","newKeys","param","merge","reducerActionStateSuccess","params","loading","reducerActionStateError","actionName","INITIAL_STATE","Immutable","createReducer","history","appReducers","router","rootReducers","combineReducers","getAuthHeaders","retrieveAuthHeaders","headers","headersKeys","persistAuthHeaders","clearAuthHeaders","buildError","response","statusCode","status","errors","data","body","getErrors","getErrorMessage","values","join","sagas","Creators","sagasFunction","isTake","options","resp","api","call","put","onSuccess","onError","push","takeLatest","take","rootSaga","all","createBrowserHistory","middlewares","sagaMiddleware","createSagaMiddleware","composeEnhancers","process","env","REACT_APP_LOGGING_ENABLED","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","storeAppMiddlewares","length","el","store","createStore","applyMiddleware","runSaga","run","close","dispatch","END","selectors","getState","createSelector","children","React","Provider","dispatchRedux","useDispatch","useContext","request","useCallback","valueProp","useSelector","isNumber","is","Number","isString","String","isWithin","curry","min","max","gte","lte","in200s","evolveResponse","ok","persistHeaders","getData","parseResponse","isS3Presign","config","match","humps","camelizeKeys","pagination","meta","path","parseError","Promise","reject","axios","create","baseURL","interceptors","use","FormData","decamelizeKeys","headersAuthRequest"],"mappings":"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"}